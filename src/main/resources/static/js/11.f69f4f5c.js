(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[11],{OuSC:function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-page",{attrs:{padding:""}},[n("div",{staticClass:"row justify-center"},[n("q-input",{staticClass:"col-xs-12 q-mb-md",attrs:{"float-label":"姓名",placeholder:"请输入姓名",before:[{icon:"person"}]},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),n("q-input",{staticClass:"col-xs-12 q-mb-md",attrs:{"float-label":"手机号",placeholder:"请输入手机号",before:[{icon:"phone"}]},model:{value:t.phone,callback:function(e){t.phone=e},expression:"phone"}}),t._l(t.cars,function(e,o){return n("div",{key:o,staticClass:"col-xs-12"},[n("q-input",{staticClass:"q-mb-lg col-xs-12",attrs:{"float-label":"车牌号",placeholder:"请输入车牌号",before:[{icon:"drive_eta"}]},model:{value:e.plateNum,callback:function(n){t.$set(e,"plateNum",n)},expression:"car.plateNum"}}),n("q-uploader",{staticClass:"q-mb-lg",attrs:{multiple:"","stack-label":"图片上传","auto-expand":"",url:t.uploadUrl},on:{add:t.filesAdd,uploaded:t.fileUploaded,start:function(n){t.uploadStart(e)},fail:t.fileUploadFail,finish:t.finishUpload}})],1)}),n("q-btn",{staticClass:"q-mb-lg",attrs:{flat:"",round:"",icon:"add"},on:{click:t.addCar}}),n("q-btn",{staticClass:"full-width",attrs:{loading:t.btnLoading,color:"positive",label:"登记"},on:{click:t.register}})],2)])},a=[];o._withStripped=!0;n("f3/d");var s=n("MVZn"),i=n.n(s),l=n("L2JU"),r={data:function(){return{name:"",phone:"",currentCar:{},cars:[{plateNum:"",photos:[]}],btnLoading:!1,uploadUrl:"http://www.ytjdcjc.cn/upload",registerInfo:{}}},validations:{},computed:i()({},Object(l["c"])(["userInfo"])),methods:i()({},Object(l["b"])([]),{addCar:function(){this.cars.push({plateNum:"",photos:[]})},filesAdd:function(t){console.log("files: ",t)},uploadStart:function(t){console.log("uploadStart: ",t),this.currentCar=t},fileUploaded:function(t,e){console.log("file: ",t),console.log("response: ",JSON.parse(e.response).path),this.currentCar.photos.push(JSON.parse(e.response).path)},fileUploadFail:function(t,e){console.log("file: ",t),console.log("failResponse: ",e.response)},finishUpload:function(){console.log("finishUpload!")},register:function(){var t=this;this.btnLoading=!0,this.$http.post("http://www.ytjdcjc.cn/customer/add",{customer:{name:this.name,phone:this.phone,openid:this.userInfo.openId,nickname:this.userInfo.nickname},cars:this.cars}).then(function(e){t.btnLoading=!1,"SUCCESS"==e.data.message&&(t.$router.push("/registerDetail"),t.registerInfo={customer:{name:t.name,phone:t.phone,openid:t.userInfo.openId,nickname:t.userInfo.nickname},cars:t.cars},t.$store.commit("saveRegisterInfo",t.registerInfo))}).catch(function(e){t.btnLoading=!1,console.log(e)})},fetchData:function(){var t=this;this.$http.post("http://www.ytjdcjc.cn/customer/list?openid="+this.userInfo.openId).then(function(e){"200"==e.data.code&&(t.registerInfo=e.data.data,console.log(t.registerInfo),t.registerInfo.customer&&(t.$router.push("/registerDetail"),t.$store.commit("saveRegisterInfo",t.registerInfo)))})}}),created:function(){this.fetchData()}},c=r,p=(n("hdnn"),n("KHd+")),d=Object(p["a"])(c,o,a,!1,null,null,null);e["default"]=d.exports},hbG7:function(t,e,n){},hdnn:function(t,e,n){"use strict";var o=n("hbG7"),a=n.n(o);a.a}}]);