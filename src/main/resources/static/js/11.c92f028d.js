(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[11],{OuSC:function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-page",{attrs:{padding:""}},[n("div",{staticClass:"row justify-center"},[n("q-input",{staticClass:"col-xs-12 q-mb-md",attrs:{"float-label":"姓名",placeholder:"请输入姓名",before:[{icon:"person"}]},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),n("q-input",{staticClass:"col-xs-12 q-mb-md",attrs:{"float-label":"手机号",placeholder:"请输入手机号",before:[{icon:"phone"}]},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}}),e._l(e.cars,function(t,o){return n("div",{key:o,staticClass:"col-xs-12"},[n("q-input",{staticClass:"q-mb-lg col-xs-12",attrs:{"float-label":"车牌号",placeholder:"请输入车牌号",before:[{icon:"drive_eta"}]},model:{value:t.plateNum,callback:function(n){e.$set(t,"plateNum",n)},expression:"car.plateNum"}}),n("q-uploader",{staticClass:"q-mb-lg",attrs:{multiple:"","stack-label":"图片上传","auto-expand":"",url:e.uploadUrl},on:{add:e.filesAdd,uploaded:e.fileUploaded,start:function(n){e.uploadStart(t)},fail:e.fileUploadFail,finish:e.finishUpload}})],1)}),n("q-btn",{staticClass:"q-mb-lg",attrs:{flat:"",round:"",icon:"add"},on:{click:e.addCar}}),n("q-btn",{staticClass:"full-width",attrs:{loading:e.btnLoading,color:"positive",label:"登记"},on:{click:e.register}})],2)])},a=[];o._withStripped=!0;n("f3/d");var s=n("MVZn"),i=n.n(s),l=n("L2JU"),r={data:function(){return{name:"",phone:"",currentCar:{},cars:[{plateNum:"",photos:[]}],btnLoading:!1,uploadUrl:"http://selinplus.natappvip.cc/upload",registerInfo:{}}},validations:{},computed:i()({},Object(l["c"])(["userInfo"])),methods:i()({},Object(l["b"])([]),{addCar:function(){this.cars.push({plateNum:"",photos:[]})},filesAdd:function(e){console.log("files: ",e)},uploadStart:function(e){console.log("uploadStart: ",e),this.currentCar=e},fileUploaded:function(e,t){console.log("file: ",e),console.log("response: ",JSON.parse(t.response).path),this.currentCar.photos.push(JSON.parse(t.response).path)},fileUploadFail:function(e,t){console.log("file: ",e),console.log("failResponse: ",t.response)},finishUpload:function(){console.log("finishUpload!")},register:function(){var e=this;this.btnLoading=!0,this.$http.post("http://selinplus.natappvip.cc/customer/add",{customer:{name:this.name,phone:this.phone,openid:this.userInfo.openId,nickname:this.userInfo.nickname},cars:this.cars}).then(function(t){e.btnLoading=!1,"SUCCESS"==t.data.message&&(e.$router.push("/registerDetail"),e.registerInfo={customer:{name:e.name,phone:e.phone,openid:e.userInfo.openId,nickname:e.userInfo.nickname},cars:e.cars},e.$store.commit("saveRegisterInfo",e.registerInfo))}).catch(function(t){e.btnLoading=!1,console.log(t)})},fetchData:function(){var e=this;this.$http.post("http://selinplus.natappvip.cc/customer/list?openid="+this.userInfo.openId).then(function(t){"200"==t.data.code&&(e.registerInfo=t.data.data,console.log(e.registerInfo),e.registerInfo.customer&&(e.$router.push("/registerDetail"),e.$store.commit("saveRegisterInfo",e.registerInfo)))})}}),created:function(){this.fetchData()}},c=r,p=(n("hdnn"),n("KHd+")),u=Object(p["a"])(c,o,a,!1,null,null,null);t["default"]=u.exports},hbG7:function(e,t,n){},hdnn:function(e,t,n){"use strict";var o=n("hbG7"),a=n.n(o);a.a}}]);