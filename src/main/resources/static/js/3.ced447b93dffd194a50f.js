webpackJsonp([3],{"1cHr":function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=t("Dd8w"),a=t.n(o),s=t("NYxO"),i={data:function(){return{name:"",phone:"",currentCar:{},cars:[{plateNum:"",photos:[]}],btnLoading:!1,uploadUrl:"http://selinplus.natappvip.cc/upload",registerInfo:{}}},validations:{},computed:a()({},Object(s.c)(["userInfo"])),methods:a()({},Object(s.b)([]),{addCar:function(){this.cars.push({plateNum:"",photos:[]})},filesAdd:function(n){console.log("files: ",n)},uploadStart:function(n){console.log("uploadStart: ",n),this.currentCar=n},fileUploaded:function(n,e){console.log("file: ",n),console.log("response: ",JSON.parse(e.response).path),this.currentCar.photos.push(JSON.parse(e.response).path)},fileUploadFail:function(n,e){console.log("file: ",n),console.log("failResponse: ",e.response)},finishUpload:function(){console.log("finishUpload!")},register:function(){var n=this;this.btnLoading=!0,this.$http.post("http://selinplus.natappvip.cc/customer/add",{customer:{name:this.name,phone:this.phone,openid:this.userInfo.openId,nickname:this.userInfo.nickname},cars:this.cars}).then(function(e){n.btnLoading=!1,"SUCCESS"==e.data.message&&(n.$router.push("/registerDetail"),n.registerInfo={customer:{name:n.name,phone:n.phone,openid:n.userInfo.openId,nickname:n.userInfo.nickname},cars:n.cars},n.$store.commit("saveRegisterInfo",n.registerInfo))}).catch(function(e){n.btnLoading=!1,console.log(e)})},fetchData:function(){var n=this;this.$http.post("http://selinplus.natappvip.cc/customer/list?openid="+this.userInfo.openId).then(function(e){"200"==e.data.code&&(n.registerInfo=e.data.data,console.log(n.registerInfo),n.registerInfo.customer&&(n.$router.push("/registerDetail"),n.$store.commit("saveRegisterInfo",n.registerInfo)))})}}),created:function(){this.fetchData()}},l=function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("q-page",{attrs:{padding:""}},[t("div",{staticClass:"row justify-center"},[t("q-input",{staticClass:"col-xs-12 q-mb-md",attrs:{"float-label":"姓名",placeholder:"请输入姓名",before:[{icon:"person"}]},model:{value:n.name,callback:function(e){n.name=e},expression:"name"}}),n._v(" "),t("q-input",{staticClass:"col-xs-12 q-mb-md",attrs:{"float-label":"手机号",placeholder:"请输入手机号",before:[{icon:"phone"}]},model:{value:n.phone,callback:function(e){n.phone=e},expression:"phone"}}),n._v(" "),n._l(n.cars,function(e,o){return t("div",{key:o,staticClass:"col-xs-12"},[t("q-input",{staticClass:"q-mb-lg col-xs-12",attrs:{"float-label":"车牌号",placeholder:"请输入车牌号",before:[{icon:"drive_eta"}]},model:{value:e.plateNum,callback:function(t){n.$set(e,"plateNum",t)},expression:"car.plateNum"}}),n._v(" "),t("q-uploader",{staticClass:"q-mb-lg",attrs:{multiple:"","stack-label":"图片上传","auto-expand":"",url:n.uploadUrl},on:{add:n.filesAdd,uploaded:n.fileUploaded,start:function(t){n.uploadStart(e)},fail:n.fileUploadFail,finish:n.finishUpload}})],1)}),n._v(" "),t("q-btn",{staticClass:"q-mb-lg",attrs:{flat:"",round:"",icon:"add"},on:{click:n.addCar}}),n._v(" "),t("q-btn",{staticClass:"full-width",attrs:{loading:n.btnLoading,color:"positive",label:"登记"},on:{click:n.register}})],2)])},r=[];l._withStripped=!0;var c=t("XyMi"),p=!1;var u=function(n){p||t("WSDl")},d=Object(c.a)(i,l,r,!1,u,null,null);d.options.__file="src/pages/register.vue";e.default=d.exports},"3V6p":function(n,e,t){(n.exports=t("FZ+f")(!1)).push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])},WSDl:function(n,e,t){var o=t("3V6p");"string"==typeof o&&(o=[[n.i,o,""]]),o.locals&&(n.exports=o.locals);(0,t("rjj0").default)("61540471",o,!1,{})}});