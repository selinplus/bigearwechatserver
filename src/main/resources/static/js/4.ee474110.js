(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{RYW5:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-page",[a("q-table",{attrs:{data:e.tableData,columns:e.columns,filter:e.filter,separator:e.separator,"visible-columns":e.visibleColumns,selection:"multiple",selected:e.selectedSecond,"row-key":"id",color:"secondary",title:"客户之声留言管理","rows-per-page-options":e.rowsPerPageOpts,"rows-per-page-label":"每页显示行数",pagination:e.paginationControl},on:{"update:selected":function(t){e.selectedSecond=t},"update:pagination":function(t){e.paginationControl=t}},scopedSlots:e._u([{key:"body-cell-askContent",fn:function(t){return a("q-td",{attrs:{props:t}},[a("span",{staticClass:"text-italic cursor-pointer",on:{click:function(a){e.lookDetail(t)}}},[e._v("\n        "+e._s(t.value.substr(0,25))+"\n        ")])])}},{key:"body-cell-answer-content",fn:function(t){return a("q-td",{attrs:{props:t}},[a("span",{staticClass:"text-italic cursor-pointer",on:{click:function(a){e.lookDetail(t)}}},[e._v("\n        "+e._s(t.value.substr(0,25))+"\n        ")])])}},{key:"body-cell-createTime",fn:function(t){return a("q-td",{attrs:{props:t}},[e._v("\n      "+e._s(e.dateFmt(t.value))+"\n    ")])}},{key:"body-cell-updateTime",fn:function(t){return a("q-td",{attrs:{props:t}},[e._v("\n      "+e._s(e.dateFmt(t.value))+"\n    ")])}},{key:"top-selection",fn:function(t){return[a("q-btn",{staticClass:"q-mr-sm",attrs:{color:"positive",flat:"",round:"",icon:"edit"},on:{click:e.editRow}}),e._v(" "),a("q-btn",{attrs:{color:"negative",flat:"",round:"",icon:"delete"},on:{click:e.deleteRow}})]}},{key:"top-right",fn:function(t){return[a("q-search",{staticClass:"col-12 q-mb-sm",attrs:{"hide-underline":"",color:"secondary",placeholder:"搜索"},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}}),e._v(" "),a("q-table-columns",{staticClass:"q-mr-sm",attrs:{label:"筛选",color:"secondary",columns:e.columns},model:{value:e.visibleColumns,callback:function(t){e.visibleColumns=t},expression:"visibleColumns"}}),e._v(" "),a("q-select",{attrs:{color:"secondary",options:[{label:"Horizontal",value:"horizontal"},{label:"Vertical",value:"vertical"},{label:"Cell",value:"cell"},{label:"None",value:"none"}],"hide-underline":""},model:{value:e.separator,callback:function(t){e.separator=t},expression:"separator"}}),e._v(" "),a("q-btn",{attrs:{flat:"",round:"",dense:"",icon:t.inFullscreen?"fullscreen_exit":"fullscreen"},on:{click:t.toggleFullscreen}})]}}])}),e._v(" "),a("q-modal",{ref:"modalRef",attrs:{"content-css":{padding:"50px"},maximized:""},model:{value:e.editedModal,callback:function(t){e.editedModal=t},expression:"editedModal"}},[a("div",{staticClass:"row"},[a("q-card",{staticClass:"col-xs-12",attrs:{inline:"",flat:""}},[a("div",{staticClass:"ask"},[a("div",{staticClass:"ask-icon"},[e._v("问")]),e._v(" "),a("div",{staticClass:"ask-content"},[e._v(e._s(e.editedItem.askContent))])]),e._v(" "),a("div",{staticClass:"answer"},[a("div",{staticClass:"answer-icon"},[e._v("答")]),e._v(" "),a("div",{staticClass:"answer-content"},[a("q-input",{attrs:{type:"textarea","inverted-light":"",color:"orange-4"},model:{value:e.editedItem.answerContent,callback:function(t){e.$set(e.editedItem,"answerContent",t)},expression:"editedItem.answerContent"}})],1)]),e._v(" "),a("q-toggle",{staticClass:"modal-toggle",attrs:{label:"隐藏此项问答","unchecked-icon":"visibility","checked-icon":"visibility_off","true-value":"隐藏","false-value":"显示"},model:{value:e.editedItem.isDisplay,callback:function(t){e.$set(e.editedItem,"isDisplay",t)},expression:"editedItem.isDisplay"}}),e._v(" "),a("div",{staticClass:"col-12 text-center modal-btn"},[a("q-btn",{directives:[{name:"close-overlay",rawName:"v-close-overlay"}],staticClass:"q-mr-md",attrs:{color:"warning",label:"取消"}}),e._v(" "),a("q-btn",{directives:[{name:"close-overlay",rawName:"v-close-overlay"}],attrs:{color:"positive",label:"保存"},on:{click:e.save}})],1)],1)],1)])],1)},l=[];n._withStripped=!0;a("91GP");var o=a("4IOb"),i=o["S"].formatDate,s=new Date,c={data:function(){return{checked:"",tableData:[],rowsPerPageOpts:[10,15,20,0],columns:[{name:"askContent",required:!0,label:"提问内容",align:"left",field:"askContent",sortable:!0},{name:"answerContent",label:"回复内容",align:"left",field:"answerContent",sortable:!0},{name:"createTime",label:"创建时间",align:"left",field:"createTime",sortable:!0},{name:"updateTime",label:"回复时间",align:"left",field:"updateTime",sortable:!0},{name:"isDisplay",label:"显示状态",align:"left",field:"isDisplay",sortable:!0},{name:"isReply",label:"回复状态",align:"left",field:"isReply",sortable:!0},{name:"id",label:"ID",align:"left",field:"id",sortable:!0}],filter:"",visibleColumns:["askContent","answerContent","createTime","updateTime","isDisplay","isReply"],separator:"none",paginationControl:{rowsPerPage:10,page:1},loading:!1,dark:!0,selectedSecond:[],editedModal:!1,editedItem:{},editedIndex:-1,today:s}},methods:{fetchData:function(){var e=this;this.$http.get("http://www.ytjdcjc.cn/customer/voice/listAll").then(function(t){e.tableData=t.data.data}).catch(function(e){console.log(e)})},deleteRow:function(){var e=this;this.$q.notify({color:"negative",icon:"delete",message:"确定要删除吗？",position:"top",timeout:0,actions:[{label:"确定",handler:function(){for(var t=[],a=0;a<e.selectedSecond.length;a++)t.push(e.selectedSecond[a].id);var n=t.join(",");e.$http.post("http://www.ytjdcjc.cn/customer/voice/deleteByIds?ids="+n).then(function(t){200==t.data.code?(e.fetchData(),e.$q.notify({color:"positive",icon:"mood",message:"删除成功！",position:"center",timeout:1e3})):e.$q.notify({color:"negative",icon:"mood_bad",message:"删除失败，请刷新后重试！",position:"center",timeout:1e3})}).catch(function(e){console.log(e)})}},{label:"取消",handler:function(){console.log("取消")}}]})},editRow:function(){this.editedIndex=this.tableData.indexOf(this.selectedSecond[0]),this.editedItem=Object.assign({},this.selectedSecond[0]),this.editedModal=!0},save:function(){var e=this;this.editedItem.isReply="已回复",this.$http.post("http://www.ytjdcjc.cn/customer/voice/update",this.editedItem).then(function(t){e.fetchData()})},dateFmt:function(e){return i(e,"YYYY-MM-DD HH:mm:ss")},lookDetail:function(e){this.editedModal=!0,this.editedItem=e.row}},mounted:function(){this.fetchData()}},r=c,d=(a("SPHf"),a("KHd+")),u=Object(d["a"])(r,n,l,!1,null,null,null);t["default"]=u.exports},SPHf:function(e,t,a){"use strict";var n=a("tpCE"),l=a.n(n);l.a},tpCE:function(e,t,a){}}]);