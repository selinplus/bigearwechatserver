(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{"2EDv":function(e,t,o){},HQf9:function(e,t,o){"use strict";var n=o("2EDv"),a=o.n(n);a.a},agfx:function(e,t,o){"use strict";o.r(t);var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("q-page",[o("q-table",{attrs:{data:e.tableData,columns:e.columns,filter:e.filter,separator:e.separator,"visible-columns":e.visibleColumns,selection:"multiple",selected:e.selectedSecond,"row-key":"id",color:"secondary",title:"各模块内容管理","rows-per-page-options":e.rowsPerPageOpts,"rows-per-page-label":"每页显示行数",pagination:e.paginationControl},on:{"update:selected":function(t){e.selectedSecond=t},"update:pagination":function(t){e.paginationControl=t}},scopedSlots:e._u([{key:"body-cell-content",fn:function(t){return o("q-td",{attrs:{props:t}},[o("span",{staticClass:"text-italic cursor-pointer",on:{click:function(o){e.lookDetail(t)}}},[e._v("\n        "+e._s(e.removeHTMLTag(t.value).substr(0,36))+"\n        "),o("q-tooltip",{attrs:{anchor:"top middle",self:"bottom middle",offset:[10,10]}},[e._v("点击查看详情")])],1)])}},{key:"body-cell-createTime",fn:function(t){return o("q-td",{attrs:{props:t}},[e._v("\n      "+e._s(e.dateFmt(t.value))+"\n    ")])}},{key:"top-selection",fn:function(t){return[o("q-btn",{staticClass:"q-mr-sm",attrs:{color:"positive",flat:"",round:"",icon:"edit"},on:{click:e.editRow}}),e._v(" "),o("q-btn",{attrs:{color:"negative",flat:"",round:"",icon:"delete"},on:{click:e.deleteRow}})]}},{key:"top-right",fn:function(t){return[o("q-search",{staticClass:"col-12 q-mb-sm",attrs:{"hide-underline":"",color:"secondary",placeholder:"搜索"},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}}),e._v(" "),o("q-table-columns",{staticClass:"q-mr-sm",attrs:{label:"筛选",color:"secondary",columns:e.columns},model:{value:e.visibleColumns,callback:function(t){e.visibleColumns=t},expression:"visibleColumns"}}),e._v(" "),o("q-select",{attrs:{color:"secondary",options:[{label:"Horizontal",value:"horizontal"},{label:"Vertical",value:"vertical"},{label:"Cell",value:"cell"},{label:"None",value:"none"}],"hide-underline":""},model:{value:e.separator,callback:function(t){e.separator=t},expression:"separator"}}),e._v(" "),o("q-btn",{attrs:{flat:"",round:"",dense:"",icon:t.inFullscreen?"fullscreen_exit":"fullscreen"},on:{click:t.toggleFullscreen}})]}}])}),e._v(" "),o("q-modal",{ref:"modalRef",attrs:{"content-css":{padding:"50px"},maximized:""},model:{value:e.editedModal,callback:function(t){e.editedModal=t},expression:"editedModal"}},[o("div",{staticClass:"row"},[o("q-card",{staticClass:"col-xs-12",attrs:{inline:"",flat:""}},[o("q-card-media"),e._v(" "),o("q-card-title",[e._v("\n        "+e._s(e.editedItem.title)+"\n      ")]),e._v(" "),o("q-card-main",{domProps:{innerHTML:e._s(e.editedItem.content)}}),e._v(" "),o("div",{staticClass:"col-12 text-center"},[o("q-btn",{directives:[{name:"close-overlay",rawName:"v-close-overlay"}],staticClass:"q-mr-md",attrs:{color:"warning",label:"取消"}}),e._v(" "),o("q-btn",{directives:[{name:"close-overlay",rawName:"v-close-overlay"}],attrs:{color:"positive",label:"编辑"},on:{click:e.save}})],1)],1)],1)])],1)},a=[];n._withStripped=!0;o("91GP");var l=o("4IOb"),i=o("z0WU"),s=(o("L2JU"),l["R"].formatDate),c=new Date,r={data:function(){return{tableData:[],rowsPerPageOpts:[10,15,20,0],columns:[{name:"type",required:!0,label:"模块类型",align:"left",field:"type",sortable:!0},{name:"title",label:"标题",align:"left",field:"title",sortable:!0},{name:"content",label:"内容",align:"left",field:"content",sortable:!0},{name:"createTime",label:"创建时间",align:"left",field:"createTime",sortable:!0},{name:"id",label:"ID",align:"left",field:"id",sortable:!0}],filter:"",visibleColumns:["type","title","content","createTime"],separator:"none",paginationControl:{rowsPerPage:10,page:1},loading:!1,dark:!0,selectedSecond:[],editedModal:!1,editedItem:{},editedIndex:-1,payStatusOpts:[{label:"支付成功",value:"支付成功"},{label:"未支付",value:"未支付"}],disablePayStatus:!0,today:c}},methods:{fetchData:function(){var e=this;this.$http.get("http://www.ytjdcjc.cn/module/info/listAll").then(function(t){console.log(t.data),e.tableData=t.data.data}).catch(function(e){console.log(e)})},deleteRow:function(){var e=this;this.$q.notify({color:"negative",icon:"delete",message:"确定要删除吗？",position:"top",timeout:0,actions:[{label:"确定",handler:function(){for(var t=[],o=0;o<e.selectedSecond.length;o++)t.push(e.selectedSecond[o].id);var n=t.join(",");e.$http.post("http://www.ytjdcjc.cn/module/info/delete?ids="+n).then(function(t){200==t.data.code?(e.fetchData(),e.$q.notify({color:"positive",icon:"mood",message:"删除成功！",position:"center",timeout:1e3})):e.$q.notify({color:"negative",icon:"mood_bad",message:"删除失败，请刷新后重试！",position:"center",timeout:1e3})}).catch(function(e){console.log(e)})}},{label:"取消",handler:function(){console.log("取消")}}]})},editRow:function(){this.editedIndex=this.tableData.indexOf(this.selectedSecond[0]),this.editedItem=Object.assign({},this.selectedSecond[0]),this.$router.push("/main/dataInput"),this.$store.commit("editModuleInfo",this.editedItem)},save:function(){console.log(this.editedItem),this.$router.push("/main/dataInput"),this.$store.commit("editModuleInfo",this.editedItem)},dateFmt:function(e){return s(e,"YYYY-MM-DD HH:mm:ss")},removeHTMLTag:i["b"],lookDetail:function(e){this.editedModal=!0,this.editedItem=e.row}},mounted:function(){this.fetchData()}},d=r,u=(o("HQf9"),o("KHd+")),f=Object(u["a"])(d,n,a,!1,null,null,null);t["default"]=f.exports},z0WU:function(e,t,o){"use strict";o.d(t,"a",function(){return n}),o.d(t,"b",function(){return a});o("pIFo");var n=function(e,t){return Math.floor(Math.random()*(t-e)+e)+""},a=function(e){return e=e.replace(/<\/?[^>]*>/g,""),e=e.replace(/[ | ]*\n/g,"\n"),e=e.replace(/\n[\s| | ]*\r/g,"\n"),e=e.replace(/&nbsp;/gi,""),e=e.replace(/\s/g,""),e}}}]);